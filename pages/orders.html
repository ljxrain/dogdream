<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>我的订单 - AI创意魔方</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: #f8f8f8;
            padding-top: 44px; /* 为状态栏预留空间 */
            min-height: calc(100vh - 44px - 83px); /* 减去状态栏和底部导航的高度 */
            overflow-y: auto;
        }
        .tab-item {
            position: relative;
        }
        .tab-item.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 3px;
            background-color: #007aff;
            border-radius: 3px;
        }
        .order-card {
            transition: transform 0.2s ease;
        }
        .order-card:active {
            transform: scale(0.98);
        }
    </style>
</head>
<body class="pb-32">
    <!-- 页面头部 -->
    <header class="bg-white px-4 py-3 flex items-center justify-between sticky top-0 z-10 shadow-sm">
        <div class="flex items-center">
            <button id="backBtn" class="w-8 h-8 flex items-center justify-center mr-2">
                <i class="fas fa-chevron-left text-gray-600"></i>
            </button>
            <h1 class="text-lg font-semibold text-gray-800">我的订单</h1>
        </div>
        <div class="flex items-center space-x-3">
            <button class="w-8 h-8 flex items-center justify-center rounded-full bg-gray-100">
                <i class="fas fa-search text-gray-600"></i>
            </button>
        </div>
    </header>

    <!-- 订单类型选项卡 -->
    <div class="bg-white border-b border-gray-200">
        <div class="flex justify-around">
            <button class="tab-item active py-3 px-4 text-sm font-medium text-[#007aff]" data-tab="all">
                全部
            </button>
            <button class="tab-item py-3 px-4 text-sm font-medium text-gray-600" data-tab="pending">
                待付款
            </button>
            <button class="tab-item py-3 px-4 text-sm font-medium text-gray-600" data-tab="processing">
                处理中
            </button>
            <button class="tab-item py-3 px-4 text-sm font-medium text-gray-600" data-tab="shipped">
                已发货
            </button>
            <button class="tab-item py-3 px-4 text-sm font-medium text-gray-600" data-tab="completed">
                已完成
            </button>
        </div>
    </div>

    <!-- 订单列表 -->
    <div class="p-4">
        <!-- 订单卡片 - 已付款，待发货 -->
        <div class="order-card bg-white rounded-xl border border-gray-200 shadow-sm mb-4 overflow-hidden">
            <div class="p-3 flex justify-between items-center border-b border-gray-100">
                <div class="flex items-center">
                    <i class="fas fa-store text-blue-500 mr-2"></i>
                    <span class="text-sm text-gray-800">创意定制商城</span>
                </div>
                <span class="text-sm text-amber-500 font-medium">待发货</span>
            </div>
            <div class="p-3">
                <div class="flex items-start">
                    <div class="w-16 h-16 rounded-lg overflow-hidden mr-3 border border-gray-200">
                        <img src="https://images.unsplash.com/photo-1583743814966-8936f5b7be1a?q=80&w=200" alt="定制T恤" class="w-full h-full object-cover">
                    </div>
                    <div class="flex-1">
                        <h3 class="text-sm font-medium text-gray-800">定制T恤</h3>
                        <p class="text-xs text-gray-500 mt-1">规格：M号 / 白色</p>
                        <div class="flex justify-between items-center mt-2">
                            <span class="text-xs text-gray-500">x1</span>
                            <span class="text-sm font-bold text-gray-800">¥49.00</span>
                        </div>
                    </div>
                </div>
                <div class="flex justify-between items-center mt-3 pt-3 border-t border-gray-100">
                    <div class="text-xs text-gray-500">
                        共1件商品 实付:
                        <span class="text-red-600 font-medium">¥49.00</span>
                    </div>
                    <div class="flex space-x-2">
                        <button class="px-3 py-1.5 border border-gray-300 rounded-full text-xs text-gray-600">
                            查看详情
                        </button>
                        <button class="px-3 py-1.5 bg-blue-500 text-white rounded-full text-xs">
                            提醒发货
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 订单卡片 - 已发货 -->
        <div class="order-card bg-white rounded-xl border border-gray-200 shadow-sm mb-4 overflow-hidden">
            <div class="p-3 flex justify-between items-center border-b border-gray-100">
                <div class="flex items-center">
                    <i class="fas fa-store text-blue-500 mr-2"></i>
                    <span class="text-sm text-gray-800">创意定制商城</span>
                </div>
                <span class="text-sm text-blue-500 font-medium">已发货</span>
            </div>
            <div class="p-3">
                <div class="flex items-start">
                    <div class="w-16 h-16 rounded-lg overflow-hidden mr-3 border border-gray-200">
                        <img src="https://images.unsplash.com/photo-1591197172062-c718f82aba20?q=80&w=200" alt="定制抱枕" class="w-full h-full object-cover">
                    </div>
                    <div class="flex-1">
                        <h3 class="text-sm font-medium text-gray-800">定制抱枕</h3>
                        <p class="text-xs text-gray-500 mt-1">规格：45x45cm / 蓝色</p>
                        <div class="flex justify-between items-center mt-2">
                            <span class="text-xs text-gray-500">x1</span>
                            <span class="text-sm font-bold text-gray-800">¥88.00</span>
                        </div>
                    </div>
                </div>
                <div class="flex justify-between items-center mt-3 pt-3 border-t border-gray-100">
                    <div class="text-xs text-gray-500">
                        共1件商品 实付:
                        <span class="text-red-600 font-medium">¥88.00</span>
                    </div>
                    <div class="flex space-x-2">
                        <button class="px-3 py-1.5 border border-gray-300 rounded-full text-xs text-gray-600">
                            查看详情
                        </button>
                        <button class="shipping-track-btn px-3 py-1.5 bg-blue-500 text-white rounded-full text-xs">
                            查看物流
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 订单卡片 - 已完成 -->
        <div class="order-card bg-white rounded-xl border border-gray-200 shadow-sm mb-4 overflow-hidden">
            <div class="p-3 flex justify-between items-center border-b border-gray-100">
                <div class="flex items-center">
                    <i class="fas fa-store text-blue-500 mr-2"></i>
                    <span class="text-sm text-gray-800">创意定制商城</span>
                </div>
                <span class="text-sm text-green-500 font-medium">已完成</span>
            </div>
            <div class="p-3">
                <div class="flex items-start">
                    <div class="w-16 h-16 rounded-lg overflow-hidden mr-3 border border-gray-200">
                        <img src="https://images.unsplash.com/photo-1602532305019-3dbbd482dae9?q=80&w=200" alt="个性钥匙链" class="w-full h-full object-cover">
                    </div>
                    <div class="flex-1">
                        <h3 class="text-sm font-medium text-gray-800">个性钥匙链</h3>
                        <p class="text-xs text-gray-500 mt-1">规格：金属 / 银色</p>
                        <div class="flex justify-between items-center mt-2">
                            <span class="text-xs text-gray-500">x2</span>
                            <span class="text-sm font-bold text-gray-800">¥78.00</span>
                        </div>
                    </div>
                </div>
                <div class="flex justify-between items-center mt-3 pt-3 border-t border-gray-100">
                    <div class="text-xs text-gray-500">
                        共2件商品 实付:
                        <span class="text-red-600 font-medium">¥78.00</span>
                    </div>
                    <div class="flex space-x-2">
                        <button class="px-3 py-1.5 border border-gray-300 rounded-full text-xs text-gray-600">
                            查看详情
                        </button>
                        <button class="px-3 py-1.5 bg-green-500 text-white rounded-full text-xs">
                            再次购买
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 订单卡片 - 待付款 -->
        <div class="order-card bg-white rounded-xl border border-gray-200 shadow-sm mb-4 overflow-hidden">
            <div class="p-3 flex justify-between items-center border-b border-gray-100">
                <div class="flex items-center">
                    <i class="fas fa-store text-blue-500 mr-2"></i>
                    <span class="text-sm text-gray-800">创意定制商城</span>
                </div>
                <span class="text-sm text-red-500 font-medium">待付款</span>
            </div>
            <div class="p-3">
                <div class="flex items-start">
                    <div class="w-16 h-16 rounded-lg overflow-hidden mr-3 border border-gray-200">
                        <img src="https://images.unsplash.com/photo-1584269600464-37b1b58a9fe7?q=80&w=200" alt="毛绒玩偶" class="w-full h-full object-cover">
                    </div>
                    <div class="flex-1">
                        <h3 class="text-sm font-medium text-gray-800">毛绒玩偶</h3>
                        <p class="text-xs text-gray-500 mt-1">规格：30cm / 粉色</p>
                        <div class="flex justify-between items-center mt-2">
                            <span class="text-xs text-gray-500">x1</span>
                            <span class="text-sm font-bold text-gray-800">¥128.00</span>
                        </div>
                    </div>
                </div>
                <div class="flex justify-between items-center mt-3 pt-3 border-t border-gray-100">
                    <div class="text-xs text-gray-500">
                        共1件商品 应付:
                        <span class="text-red-600 font-medium">¥128.00</span>
                    </div>
                    <div class="flex space-x-2">
                        <button class="px-3 py-1.5 border border-gray-300 rounded-full text-xs text-gray-600">
                            取消订单
                        </button>
                        <button class="px-3 py-1.5 bg-red-500 text-white rounded-full text-xs">
                            去支付
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 统一的底部导航栏 -->
    <div id="unifiedBottomNav" class="h-[83px] bg-white border-t border-gray-200 flex justify-around items-center fixed bottom-0 left-0 right-0" style="display: none;">
        <a href="home.html" class="flex flex-col items-center justify-center w-1/5 text-gray-400">
            <i class="fas fa-home text-2xl mb-1"></i>
            <span class="text-xs">首页</span>
        </a>
        <a href="works.html" class="flex flex-col items-center justify-center w-1/5 text-gray-400">
            <i class="fas fa-compass text-2xl mb-1"></i>
            <span class="text-xs">热门</span>
        </a>
        <a href="shop.html" class="flex flex-col items-center justify-center w-1/5 text-gray-400">
            <i class="fas fa-store text-2xl mb-1"></i>
            <span class="text-xs">商城</span>
        </a>
        <a href="me.html" class="flex flex-col items-center justify-center w-1/5 text-[#007aff]">
            <i class="fas fa-user text-2xl mb-1"></i>
            <span class="text-xs">我的</span>
        </a>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const backBtn = document.getElementById('backBtn');
            const tabItems = document.querySelectorAll('.tab-item');
            const orderCards = document.querySelectorAll('.order-card');
            const shippingTrackBtns = document.querySelectorAll('.shipping-track-btn');
            
            // 返回按钮点击事件
            if (backBtn) {
                backBtn.addEventListener('click', function() {
                    window.location.href = 'me.html';
                });
            }
            
            // 选项卡切换
            tabItems.forEach(tab => {
                tab.addEventListener('click', function() {
                    // 重置所有选项卡样式
                    tabItems.forEach(t => {
                        t.classList.remove('active', 'text-[#007aff]');
                        t.classList.add('text-gray-600');
                    });
                    
                    // 设置当前选项卡样式
                    this.classList.add('active', 'text-[#007aff]');
                    this.classList.remove('text-gray-600');
                    
                    // 筛选订单
                    const tabType = this.getAttribute('data-tab');
                    
                    // 根据不同的选项卡类型筛选订单显示
                    if (tabType === 'all') {
                        orderCards.forEach(card => card.style.display = 'block');
                    } else {
                        orderCards.forEach(card => {
                            const statusText = card.querySelector('.p-3 .flex.justify-between.items-center span').textContent;
                            
                            if ((tabType === 'pending' && statusText === '待付款') ||
                                (tabType === 'processing' && statusText === '待发货') ||
                                (tabType === 'shipped' && statusText === '已发货') ||
                                (tabType === 'completed' && statusText === '已完成')) {
                                card.style.display = 'block';
                            } else {
                                card.style.display = 'none';
                            }
                        });
                    }
                });
            });
            
            // 查看详情按钮点击事件
            document.querySelectorAll('.order-card button:nth-of-type(1)').forEach(btn => {
                btn.addEventListener('click', function() {
                    // 使用随机订单ID跳转到详情页
                    const randomOrderId = 'ORDER' + Math.floor(Math.random() * 1000000).toString().padStart(6, '0');
                    window.location.href = 'order_detail.html?orderId=' + randomOrderId;
                });
            });
            
            // 查看物流按钮点击事件
            shippingTrackBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    // 生成随机订单ID并跳转到物流跟踪页面
                    const randomOrderId = 'ORDER' + Math.floor(Math.random() * 1000000).toString().padStart(6, '0');
                    window.location.href = 'shipping_tracking.html?orderId=' + randomOrderId;
                });
            });
            
            // 去支付按钮点击事件
            const payBtn = document.querySelector('.order-card:nth-child(4) button:nth-of-type(2)');
            if (payBtn) {
                payBtn.addEventListener('click', function() {
                    window.location.href = 'payment.html?productName=毛绒玩偶&productPrice=128.00&productSpec=30cm / 粉色';
                });
            }
            
            // 检测是否在iframe中加载
            const isInIframe = window.self !== window.top;
            const unifiedBottomNav = document.getElementById('unifiedBottomNav');
            
            // 如果不在iframe中，显示统一导航栏
            if (!isInIframe && unifiedBottomNav) {
                unifiedBottomNav.style.display = 'flex';
                
                // 配置导航点击事件
                const navLinks = unifiedBottomNav.querySelectorAll('a');
                
                navLinks.forEach(link => {
                    link.addEventListener('click', function(e) {
                        e.preventDefault();
                        const href = this.getAttribute('href');
                        window.location.href = href;
                    });
                });
            }
        });
    </script>
</body>
</html> 