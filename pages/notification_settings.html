<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>消息通知 - 造梦家</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: #f8f8f8;
            padding-top: 44px; /* 为状态栏预留空间 */
            height: calc(100vh - 44px); /* 减去状态栏高度 */
            overflow-y: auto;
        }
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 28px;
        }
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #e5e7eb;
            transition: .4s;
            border-radius: 34px;
        }
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .toggle-slider {
            background-color: #3b82f6;
        }
        input:checked + .toggle-slider:before {
            transform: translateX(22px);
        }
        .setting-item {
            transition: all 0.2s ease;
        }
        .setting-item:active {
            background-color: #f2f2f7;
        }
    </style>
</head>
<body class="pb-24">
    <!-- 页面头部 -->
    <header class="bg-white px-4 py-3 flex items-center justify-between sticky top-0 z-10 shadow-sm">
        <div class="flex items-center">
            <button id="backBtn" class="w-8 h-8 flex items-center justify-center mr-2">
                <i class="fas fa-chevron-left text-gray-600"></i>
            </button>
            <h1 class="text-lg font-semibold text-gray-800">消息通知</h1>
        </div>
    </header>

    <!-- 设置列表 -->
    <div class="mt-4">
        <!-- 通知总开关 -->
        <div class="bg-white px-4 py-4 flex justify-between items-center mb-4">
            <div class="flex items-center">
                <div class="w-10 h-10 rounded-xl bg-blue-100 flex items-center justify-center mr-3">
                    <i class="fas fa-bell text-blue-500"></i>
                </div>
                <div>
                    <h3 class="font-medium text-gray-800">通知总开关</h3>
                    <p class="text-xs text-gray-500 mt-1">开启后接收所有通知</p>
                </div>
            </div>
            <label class="toggle-switch">
                <input type="checkbox" id="mainToggle" checked>
                <span class="toggle-slider"></span>
            </label>
        </div>
        
        <!-- 通知分类 -->
        <div class="bg-white rounded-xl overflow-hidden mb-4">
            <div class="px-4 py-3 border-b border-gray-100">
                <h2 class="font-medium text-gray-600">应用通知</h2>
            </div>
            
            <div class="setting-item px-4 py-3 border-b border-gray-100 flex justify-between items-center">
                <div>
                    <h3 class="text-sm text-gray-800">订单通知</h3>
                    <p class="text-xs text-gray-500 mt-1">订单状态变更、支付提醒</p>
                </div>
                <label class="toggle-switch">
                    <input type="checkbox" class="notification-toggle" checked>
                    <span class="toggle-slider"></span>
                </label>
            </div>
            
            <div class="setting-item px-4 py-3 border-b border-gray-100 flex justify-between items-center">
                <div>
                    <h3 class="text-sm text-gray-800">创作通知</h3>
                    <p class="text-xs text-gray-500 mt-1">创作完成、作品发布提醒</p>
                </div>
                <label class="toggle-switch">
                    <input type="checkbox" class="notification-toggle" checked>
                    <span class="toggle-slider"></span>
                </label>
            </div>
            
            <div class="setting-item px-4 py-3 border-b border-gray-100 flex justify-between items-center">
                <div>
                    <h3 class="text-sm text-gray-800">互动通知</h3>
                    <p class="text-xs text-gray-500 mt-1">点赞、评论、关注提醒</p>
                </div>
                <label class="toggle-switch">
                    <input type="checkbox" class="notification-toggle" checked>
                    <span class="toggle-slider"></span>
                </label>
            </div>
            
            <div class="setting-item px-4 py-3 flex justify-between items-center">
                <div>
                    <h3 class="text-sm text-gray-800">功能更新</h3>
                    <p class="text-xs text-gray-500 mt-1">新功能、版本更新提醒</p>
                </div>
                <label class="toggle-switch">
                    <input type="checkbox" class="notification-toggle">
                    <span class="toggle-slider"></span>
                </label>
            </div>
        </div>

        <!-- 营销通知 -->
        <div class="bg-white rounded-xl overflow-hidden mb-4">
            <div class="px-4 py-3 border-b border-gray-100">
                <h2 class="font-medium text-gray-600">营销通知</h2>
            </div>
            
            <div class="setting-item px-4 py-3 border-b border-gray-100 flex justify-between items-center">
                <div>
                    <h3 class="text-sm text-gray-800">促销活动</h3>
                    <p class="text-xs text-gray-500 mt-1">限时折扣、特价活动提醒</p>
                </div>
                <label class="toggle-switch">
                    <input type="checkbox" class="notification-toggle" checked>
                    <span class="toggle-slider"></span>
                </label>
            </div>
            
            <div class="setting-item px-4 py-3 flex justify-between items-center">
                <div>
                    <h3 class="text-sm text-gray-800">会员特权</h3>
                    <p class="text-xs text-gray-500 mt-1">会员专属福利通知</p>
                </div>
                <label class="toggle-switch">
                    <input type="checkbox" class="notification-toggle" checked>
                    <span class="toggle-slider"></span>
                </label>
            </div>
        </div>

        <!-- 通知时间 -->
        <div class="bg-white rounded-xl overflow-hidden">
            <div class="px-4 py-3 border-b border-gray-100">
                <h2 class="font-medium text-gray-600">通知方式</h2>
            </div>
            
            <div class="setting-item px-4 py-3 border-b border-gray-100 flex justify-between items-center">
                <div>
                    <h3 class="text-sm text-gray-800">推送通知</h3>
                    <p class="text-xs text-gray-500 mt-1">接收系统通知栏消息</p>
                </div>
                <label class="toggle-switch">
                    <input type="checkbox" id="pushToggle" checked>
                    <span class="toggle-slider"></span>
                </label>
            </div>
            
            <div class="setting-item px-4 py-3 border-b border-gray-100 flex justify-between items-center">
                <div>
                    <h3 class="text-sm text-gray-800">声音提醒</h3>
                    <p class="text-xs text-gray-500 mt-1">接收通知时播放提示音</p>
                </div>
                <label class="toggle-switch">
                    <input type="checkbox" id="soundToggle" checked>
                    <span class="toggle-slider"></span>
                </label>
            </div>
            
            <div class="setting-item px-4 py-3 flex justify-between items-center">
                <div>
                    <h3 class="text-sm text-gray-800">免打扰时段</h3>
                    <p class="text-xs text-gray-500 mt-1">23:00 - 08:00</p>
                </div>
                <i class="fas fa-chevron-right text-gray-400 text-xs"></i>
            </div>
        </div>
    </div>

    <!-- 统一的底部导航栏 -->
    <div id="unifiedBottomNav" class="h-[83px] bg-white border-t border-gray-200 flex justify-around items-center fixed bottom-0 left-0 right-0" style="display: none;">
        <a href="home.html" class="flex flex-col items-center justify-center w-1/5 text-gray-400">
            <i class="fas fa-home text-2xl mb-1"></i>
            <span class="text-xs">首页</span>
        </a>
        <a href="works.html" class="flex flex-col items-center justify-center w-1/5 text-gray-400">
            <i class="fas fa-compass text-2xl mb-1"></i>
            <span class="text-xs">热门</span>
        </a>
        <a href="shop.html" class="flex flex-col items-center justify-center w-1/5 text-gray-400">
            <i class="fas fa-store text-2xl mb-1"></i>
            <span class="text-xs">商城</span>
        </a>
        <a href="me.html" class="flex flex-col items-center justify-center w-1/5 text-[#007aff]">
            <i class="fas fa-user text-2xl mb-1"></i>
            <span class="text-xs">我的</span>
        </a>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const backBtn = document.getElementById('backBtn');
            const mainToggle = document.getElementById('mainToggle');
            const notificationToggles = document.querySelectorAll('.notification-toggle');
            const pushToggle = document.getElementById('pushToggle');
            const soundToggle = document.getElementById('soundToggle');
            
            // 返回按钮点击事件
            if (backBtn) {
                backBtn.addEventListener('click', function() {
                    // 返回到个人中心页面
                    window.location.href = 'me.html';
                });
            }
            
            // 总开关控制其他开关
            if (mainToggle) {
                mainToggle.addEventListener('change', function() {
                    const isChecked = this.checked;
                    notificationToggles.forEach(toggle => {
                        toggle.checked = isChecked;
                        toggle.disabled = !isChecked;
                        if (!isChecked) {
                            toggle.parentElement.classList.add('opacity-50');
                        } else {
                            toggle.parentElement.classList.remove('opacity-50');
                        }
                    });
                    
                    // 总开关也控制推送和声音
                    if (pushToggle) {
                        pushToggle.checked = isChecked;
                        pushToggle.disabled = !isChecked;
                        if (!isChecked) {
                            pushToggle.parentElement.classList.add('opacity-50');
                        } else {
                            pushToggle.parentElement.classList.remove('opacity-50');
                        }
                    }
                    
                    if (soundToggle) {
                        soundToggle.checked = isChecked;
                        soundToggle.disabled = !isChecked;
                        if (!isChecked) {
                            soundToggle.parentElement.classList.add('opacity-50');
                        } else {
                            soundToggle.parentElement.classList.remove('opacity-50');
                        }
                    }
                });
            }
            
            // 点击免打扰时段
            document.querySelectorAll('.setting-item').forEach(item => {
                if (item.querySelector('i.fa-chevron-right')) {
                    item.addEventListener('click', function() {
                        alert('免打扰时段设置功能正在开发中');
                    });
                }
            });
            
            // 检测是否在iframe中加载
            const isInIframe = window.self !== window.top;
            const unifiedBottomNav = document.getElementById('unifiedBottomNav');
            
            // 如果不在iframe中，显示统一导航栏
            if (!isInIframe && unifiedBottomNav) {
                unifiedBottomNav.style.display = 'flex';
                document.body.classList.add('pb-32'); // 增加底部内边距以适应导航栏
                
                // 配置导航点击事件
                const navLinks = unifiedBottomNav.querySelectorAll('a');
                
                navLinks.forEach(link => {
                    link.addEventListener('click', function(e) {
                        e.preventDefault();
                        const href = this.getAttribute('href');
                        window.location.href = href;
                    });
                });
            }
        });
    </script>
</body>
</html> 